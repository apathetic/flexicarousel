<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>Flexicarousel.</title>
	<meta name="viewport" content="width=device-width">
	<link rel="icon" type="image/ico" href="demo/favicon.ico">

	<link rel="stylesheet" href="demo/styles.css">
	<link rel="stylesheet" href="src/flexicarousel.css">
	<script src="dist/flexicarousel.min.js"></script>

	<!-- demo stuffs -->
	<link rel="stylesheet" href="https://rawgit.com/apathetic/showcase/harp/www/css/styles.css">
	<script src="demo/prism.js"></script>
	<script src="https://cdn.rawgit.com/apathetic/stickynav/master/dist/stickynav.min.js"></script>
	<script>
		window.addEventListener('DOMContentLoaded', function() {
			stickyNav.init({ nav: '#sticky' });
		});
	</script>
	<!-- end demo stuffs -->

</head>
<body>

	<header>
		<h1>Flexicarousel.</h1>
	</header>

	<nav>
		<div id="sticky">
			<div class="container">
				<nav data-autogenerate="true">
					<ul></ul>
				</nav>
			</div>
		</div>
	</nav>

	<main class="component left-rail">

		<section data-nav="About" id="about">
			<div class="container">
				<h2>About</h2>
				<p>A flexible carousel that works on both desktop and mobile devices, and is compleletely responsive. Additionally, there is a strict separation
				of state and style. That is to say, javascript maintains the state of the carousel, while the CSS is responsible for the presentation and display
				of this state</p>

				<h3>Implementation</h3>
				<p>Flexicarousel enables a touch-based interface (ie. sliding slides via dragging) while also respecting the separation of state and behaviour.
				You can swipe to drag a slide yet still use CSS to control how the slide transitions will behave. You can also choose to change slides by
				using the exposed API. The carousel works on both desktop and mobile, using only CSS to control the look and feel. The result is a basic yet
				robust carousel, weighing in at under 2KB</p>
			</div>
		</section>

		<section data-nav="Download" id="download">
			<div class="container">
				<h2>Download</h2>
				<h3>Github</h3>
				<p><a href="https://github.com/apathetic/flexicarousel">Get it from the Github repo</a></p>
			</div>
		</section>

		<section data-nav="Demo" id="demo">
			<div class="container">
				<h2>Demo</h2>

				<h3>Infinite, overflowing</h3>
				<div class="carousel" id="ten">
					<ul class="wrap">
						<li>
							<h3>1</h3>
							<img src="demo/images/face1.jpg">
						</li>
						<li>
							<h3>2</h3>
							<img src="demo/images/face2.jpg">
						</li>
						<li>
							<h3>3</h3>
							<img src="demo/images/face3.jpg">
						</li>
						<li>
							<h3>4</h3>
							<img src="demo/images/face4.jpg">
						</li>
						<li>
							<h3>5</h3>
							<img src="demo/images/face1.jpg">
						</li>
						<li>
							<h3>6</h3>
							<img src="demo/images/face2.jpg">
						</li>
						<li>
							<h3>7</h3>
							<img src="demo/images/face3.jpg">
						</li>
					</ul>

					<nav class="demo-nav">
						<a href="" class="prev"><span>⟨</span></a>
						<ul>
							<li></li><li></li><li></li><li></li><li></li><li></li><li></li>
						</ul>
						<a href="" class="next"><span>⟩</span></a>
					</nav>
				</div>


				<hr />


				<h3>Bounded, clipped</h3>
				<div class="carousel clip" id="billion">
					<ul class="wrap">
						<li>
							<h3>1</h3>
							<img src="demo/images/face1.jpg">
						</li>
						<li>
							<h3>2</h3>
							<img src="demo/images/face2.jpg">
						</li>
						<li>
							<h3>3</h3>
							<img src="demo/images/face3.jpg">
						</li>
					</ul>

					<nav class="demo-nav">
						<a href="" class="prev"><span>⟨</span></a>
						<ul>
							<li></li><li></li><li></li>
						</ul>
						<a href="" class="next"><span>⟩</span></a>
					</nav>
				</div>


				<hr />


				<h3>Infinite, scroll by 3</h3>
				<div class="carousel" id="seven">
					<div class="clip">
						<ul class="wrap">
							<li>
								<h3>1</h3>
								<img src="demo/images/face1.jpg">
							</li>
							<li>
								<h3>2</h3>
								<img src="demo/images/face2.jpg">
							</li>
							<li>
								<h3>3</h3>
								<img src="demo/images/face3.jpg">
							</li>
							<li>
								<h3>4</h3>
								<img src="demo/images/face2.jpg">
							</li>
							<li>
								<h3>5</h3>
								<img src="demo/images/face1.jpg">
							</li>
							<li>
								<h3>6</h3>
								<img src="demo/images/face2.jpg">
							</li>
							<li>
								<h3>7</h3>
								<img src="demo/images/face3.jpg">
							</li>
						</ul>
					</div>

					<nav class="demo-nav">
						<a href="" class="prev"><span>⟨</span></a>
						<a href="" class="next"><span>⟩</span></a>
					</nav>
				</div>

			</div>
		</section>

		<section data-nav="Prereqs" id="prereqs">
			<div class="container">
				<h2>Prereqs</h2>
				<p>none</p>
			</div>
		</section>

		<section data-nav="Compatibility" id="compatibility">
			<div class="container">
				<h2>Compatibility</h2>
				<ul class="bullets">
					<li>IE8+</li>
					<li>Firefox, Chrome, Opera</li>
					<li>iOS, Android</li>
				</ul>
			</div>
		</section>

		<section data-nav="code" id="code">
			<div class="container">
				<h2>Code</h2>

				<pre><code class="language-javascript">
var container = document.querySelector('#carousel');
var carousel = new Carousel(container, {
	infinite: true,
	onSlide: function() { ... }
});

container.querySelector('.prev').addEventListener('click', carousel.prev);
container.querySelector('.next').addEventListener('click', carousel.next);
				</code></pre>

			</div>
		</section>

		<section data-nav="API" id="api">
			<div class="container">
				<h2>API</h2>

				<h3>Options</h3>

				<div class="table-responsive">
					<table class="table table-bordered table-striped">
						<thead>
							<tr>
								<th style="width:100px;">name</th>
								<th style="width:50px;">type</th>
								<th style="width:50px;">default</th>
								<th>description</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>activeClass</td>
								<td>string</td>
								<td>active</td>
								<td>Class to use on the active slide.</td>
							</tr>
							<tr>
								<td>slideWrap</td>
								<td>string</td>
								<td>.wrap</td>
								<td>The selector to use when searching for the slides' container. This is used only to bind touch events to, on mobile.</td>
							</tr>
							<tr>
								<td>slides</td>
								<td>string</td>
								<td>li</td>
								<td>The selector to use when searching for slides within the <code>slideWrap</code> container.</td>
							</tr>
							<tr>
								<td>infinite</td>
								<td>boolean</td>
								<td>true</td>
								<td>Enable infinite scrolling or not</td>
							</tr>
							<tr>
								<td>onSlide</td>
								<td>function</td>
								<td>undefined</td>
								<td>A function to execute on slide. It is passed <code>to</code> and <code>from</code> indices.</td>
							</tr>
							<tr>
								<td>disableDragging</td>
								<td>boolean</td>
								<td>false</td>
								<td>if you'd like to disable the touch UI for whatever reason</td>
							</tr>

							</tr>
						</tbody>
					</table>
				</div>

				<h3>Methods</h3>

				<div class="table-responsive">
					<table class="table table-bordered table-striped">
						<thead>
							<tr>
								<th style="width:100px;">name</th>
								<th style="width:50px;">method</th>
								<th>description</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Next Slide</td>
								<td>carousel.next()</td>
								<td>Advance carousel to the next slide</td>
							</tr>
							<tr>
								<td>Previous Slide</td>
								<td>carousel.prev()</td>
								<td>Advance carousel to the previous slide</td>
							</tr>
							<tr>
								<td>Go To Slide</td>
								<td>carousel.to(i)</td>
								<td>Advance carousel to the <em>i<sup>th</sup></em> slide</td>
							</tr>
						</tbody>
					</table>
				</div>

			</div>
		</section>
	</main>

	<script>

		/**
		 * Removes whitespace nodes. Useful to normalize inline-block layouts (<= IE9)
		 * @param  {DOMElement} handle the element to remove whitespace nodes from
		 * @return {void}
		 */
		function removeEmptyNodes(handle) {
			var spaces = _.filter(handle.childNodes,
				function(el) {
					return (el.nodeType === 3 && !/\S/.test(el.nodeValue));
				});

			_.each(spaces, function(space) {
				handle.removeChild(space);
			});
		}


		function updateNav(i) {

			var bullets = this.handle.querySelectorAll('.demo-nav li');
			var next = this.handle.querySelector('.demo-nav .next');
			var prev = this.handle.querySelector('.demo-nav .prev');

			if (!this.options.infinite) {
				if (prev) {
					prev.classList.toggle('disabled', i === 0);
				}
				if (next) {
					next.classList.toggle('disabled', i + 1 >= this.numSlides);
				}
			}

			if (bullets && bullets.length > 0) {
				Array.prototype.forEach.call(bullets, function(bullet){
					bullet.classList.remove('active');
				});
				bullets[i].classList.add('active');
			}
		}


		// ===================================================================


		var container = document.querySelector('#ten');
		var bullets = container.querySelectorAll('.bullets li');
		var carousel = new Carousel(container, {
			'onSlide': updateNav,
			'display': 5					// there are 3 showing, but we allow for 2 to be "hanging" off the end
		});

		container.querySelector('.prev').addEventListener('click', function(e){
			e.preventDefault();
			carousel.prev();
		});

		container.querySelector('.next').addEventListener('click', function(e){
			e.preventDefault();
			carousel.next();
		});

		Array.prototype.forEach.call(bullets, function(bullet, index){
			bullet.addEventListener('click', function(e) {
				e.preventDefault();
				carousel.go(index);
			});
		});



		// ===================================================================

		var container2 = document.querySelector('#billion');
		var carousel2 = new Carousel(container2, {
			'infinite': false,
			'onSlide': updateNav
		});

		container2.querySelector('.prev').addEventListener('click', function(e){
			e.preventDefault();
			carousel2.prev();
		});

		container2.querySelector('.next').addEventListener('click', function(e){
			e.preventDefault();
			carousel2.next();
		});



		// ===================================================================

		var skip = 3;
		var container3 = document.querySelector('#seven');
		var carousel3 = new Carousel(container3, {
			'infinite': true,
			'display': 5
		});

		container3.querySelector('.prev').addEventListener('click', function(e){
			e.preventDefault();
			carousel3.go(carousel3.current - skip);
		});

		container3.querySelector('.next').addEventListener('click', function(e){
			e.preventDefault();
			carousel3.go(carousel3.current + skip);
		});






	</script>

</body>
</html>
